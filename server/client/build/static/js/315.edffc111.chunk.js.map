{"version":3,"file":"static/js/315.edffc111.chunk.js","mappings":"gOAmFA,UA9EgB,WAAO,IAADA,EACdC,GAAWC,EAAAA,EAAAA,MACjBC,GAAwCC,EAAAA,EAAAA,UAAS,MAAKC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA/CI,EAAYF,EAAA,GAAEG,EAAeH,EAAA,GAC9BI,GAAcC,EAAAA,EAAAA,QAAO,MACrBC,GAASD,EAAAA,EAAAA,UACTE,GAAOC,EAAAA,EAAAA,KAAY,SAACC,GAAK,OAAKA,EAAMC,KAAKC,QAAQ,IA2BvD,OACEC,EAAAA,EAAAA,KAAA,QAAMC,UAAU,UAASC,UACvBC,EAAAA,EAAAA,MAAA,QAAMF,UAAU,OAAMC,SAAA,EACpBF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,YAAWC,SAAC,uBAC1BC,EAAAA,EAAAA,MAAA,SAAOF,UAAU,aAAYC,SAAA,EAC3BF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,YAAWC,SAAC,cACzBF,EAAAA,EAAAA,KAAA,SACEI,KAAK,QACLC,KAAK,QACLC,YAAY,WACZC,aAAcZ,EAAKa,UAAY,GAC/BC,UAAQ,EACRC,IAAKlB,QAGTW,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wBAAuBC,SAAA,EACpCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,qBAAoBC,UACjCF,EAAAA,EAAAA,KAAA,OACEW,IAAG,oBAAAC,OAAgC,QAAhC7B,EAAsBY,EAAKkB,aAAK,IAAA9B,OAAA,EAAVA,EAAY+B,KACrCb,UAAU,WACVc,IAAI,UACJL,IAAKhB,EACLsB,QAxCa,SAACC,GACxBvB,EAAOwB,QAAQP,IAAMQ,IAAIC,gBAAgB9B,EAC3C,OAyCQa,EAAAA,EAAAA,MAAA,SAAOF,UAAU,aAAaoB,QAAQ,QAAOnB,SAAA,CAAC,wBAE5CF,EAAAA,EAAAA,KAAA,SACEI,KAAK,OACLkB,GAAG,QACHC,OAAO,UACPlB,KAAK,QACLmB,SA1Da,SAACP,GACxB,GAAIA,EAAEQ,OAAOC,MAAO,CAClB,IAAOC,GAAPtC,EAAAA,EAAAA,GAAe4B,EAAEQ,OAAOC,MAAK,GAAlB,GACXnC,EAAgBoC,GAChBjC,EAAOwB,QAAQP,IAAMQ,IAAIC,gBAAgBO,EAC3C,CACF,WAwDM3B,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gBAAeC,UAC5BF,EAAAA,EAAAA,KAAA,UAAQC,UAAU,qBAAqB2B,QAnDrB,SAACX,GACzBA,EAAEY,iBACGrC,EAAY0B,QAAQY,MASzB9C,GAAS+C,EAAAA,EAAAA,IAAS,CAAEvB,SAAUhB,EAAY0B,QAAQY,MAAOxC,aAAAA,KARvDN,EACEgD,EAAAA,EAAAA,SAAmB,CACjBC,MAAO,iCACPX,IAAIY,EAAAA,EAAAA,OAMZ,EAuC0EhC,SAAC,iBAO7E,C","sources":["pages/Profile.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { v4 as uuid } from \"uuid\";\nimport { updateMe } from \"../store/auth-slice\";\nimport { uiActions } from \"../store/ui-slice\";\nconst Profile = () => {\n  const dispatch = useDispatch();\n  const [selectedFile, setSelectedFile] = useState(null);\n  const usernameRef = useRef(null);\n  const imgRef = useRef();\n  const user = useSelector((state) => state.auth.userInfo);\n  const handleFileChange = (e) => {\n    if (e.target.files) {\n      const [file] = e.target.files;\n      setSelectedFile(file);\n      imgRef.current.src = URL.createObjectURL(file);\n    }\n  };\n\n  const handleLoadAvatar = (e) => {\n    imgRef.current.src = URL.createObjectURL(selectedFile);\n  };\n\n  const handleUploadClick = (e) => {\n    e.preventDefault();\n    if (!usernameRef.current.value) {\n      dispatch(\n        uiActions.addNotif({\n          title: \"please fill the username field\",\n          id: uuid(),\n        })\n      );\n      return;\n    }\n    dispatch(updateMe({ username: usernameRef.current.value, selectedFile }));\n  };\n\n  return (\n    <main className=\"profile\">\n      <form className=\"form\">\n        <h1 className=\"heading-l\">Edit your profile</h1>\n        <label className=\"text-input\">\n          <p className=\"heading-m\">Username</p>\n          <input\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"Username\"\n            defaultValue={user.username || \"\"}\n            required\n            ref={usernameRef}\n          />\n        </label>\n        <div className=\"profile__upload gap-s\">\n          <div className=\"profile__thumbnail\">\n            <img\n              src={`./images/avatars/${user.image?.png}`}\n              className=\"portrait\"\n              alt=\"profile\"\n              ref={imgRef}\n              onError={handleLoadAvatar}\n            />\n          </div>\n          <label className=\"file-input\" htmlFor=\"photo\">\n            Change profile photo\n            <input\n              type=\"file\"\n              id=\"photo\"\n              accept=\"image/*\"\n              name=\"photo\"\n              onChange={handleFileChange}\n            />\n          </label>\n        </div>\n        <div className=\"btn-container\">\n          <button className=\"btn btn--fill-blue\" onClick={handleUploadClick}>\n            Upload\n          </button>\n        </div>\n      </form>\n    </main>\n  );\n};\n\nexport default Profile;\n"],"names":["_user$image","dispatch","useDispatch","_useState","useState","_useState2","_slicedToArray","selectedFile","setSelectedFile","usernameRef","useRef","imgRef","user","useSelector","state","auth","userInfo","_jsx","className","children","_jsxs","type","name","placeholder","defaultValue","username","required","ref","src","concat","image","png","alt","onError","e","current","URL","createObjectURL","htmlFor","id","accept","onChange","target","files","file","onClick","preventDefault","value","updateMe","uiActions","title","uuid"],"sourceRoot":""}