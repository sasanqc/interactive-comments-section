"use strict";(self.webpackChunkinteractive_comments_section=self.webpackChunkinteractive_comments_section||[]).push([[819],{4819:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var r,l=n(2791),a=n(9434),c=n(2810),i=["title","titleId"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function u(e,t){var n=e.title,a=e.titleId,c=s(e,i);return l.createElement("svg",o({width:14,height:13,fill:"current",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?l.createElement("title",{id:a},n):null,r||(r=l.createElement("path",{d:"M.227 4.316 5.04.16a.657.657 0 0 1 1.085.497v2.189c4.392.05 7.875.93 7.875 5.093 0 1.68-1.082 3.344-2.279 4.214-.373.272-.905-.07-.767-.51 1.24-3.964-.588-5.017-4.829-5.078v2.404c0 .566-.664.86-1.085.496L.227 5.31a.657.657 0 0 1 0-.993Z",fill:"current"})))}var d,m=l.forwardRef(u),f=(n.p,["title","titleId"]);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function b(e,t){var n=e.title,r=e.titleId,a=h(e,f);return l.createElement("svg",p({width:11,height:3,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,d||(d=l.createElement("path",{d:"M9.256 2.66c.204 0 .38-.056.53-.167.148-.11.222-.243.222-.396V.722c0-.152-.074-.284-.223-.395a.859.859 0 0 0-.53-.167H.76a.859.859 0 0 0-.53.167C.083.437.009.57.009.722v1.375c0 .153.074.285.223.396a.859.859 0 0 0 .53.167h8.495Z",fill:"#C5C6EF"})))}var v,y=l.forwardRef(b),j=(n.p,["title","titleId"]);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function x(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function O(e,t){var n=e.title,r=e.titleId,a=x(e,j);return l.createElement("svg",g({width:11,height:11,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,v||(v=l.createElement("path",{d:"M6.33 10.896c.137 0 .255-.05.354-.149.1-.1.149-.217.149-.354V7.004h3.315c.136 0 .254-.05.354-.149.099-.1.148-.217.148-.354V5.272a.483.483 0 0 0-.148-.354.483.483 0 0 0-.354-.149H6.833V1.4a.483.483 0 0 0-.149-.354.483.483 0 0 0-.354-.149H4.915a.483.483 0 0 0-.354.149c-.1.1-.149.217-.149.354v3.37H1.08a.483.483 0 0 0-.354.15c-.1.099-.149.217-.149.353v1.23c0 .136.05.254.149.353.1.1.217.149.354.149h3.333v3.39c0 .136.05.254.15.353.098.1.216.149.353.149H6.33Z",fill:"#C5C6EF"})))}var _,w=l.forwardRef(O),N=(n.p,["title","titleId"]);function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k.apply(this,arguments)}function C(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function E(e,t){var n=e.title,r=e.titleId,a=C(e,N);return l.createElement("svg",k({width:12,height:14,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,_||(_=l.createElement("path",{d:"M1.167 12.448c0 .854.7 1.552 1.555 1.552h6.222c.856 0 1.556-.698 1.556-1.552V3.5H1.167v8.948Zm10.5-11.281H8.75L7.773 0h-3.88l-.976 1.167H0v1.166h11.667V1.167Z",fill:"current"})))}var I,P=l.forwardRef(E),S=(n.p,["title","titleId"]);function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A.apply(this,arguments)}function H(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function R(e,t){var n=e.title,r=e.titleId,a=H(e,S);return l.createElement("svg",A({width:14,height:14,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,I||(I=l.createElement("path",{d:"M13.479 2.872 11.08.474a1.75 1.75 0 0 0-2.327-.06L.879 8.287a1.75 1.75 0 0 0-.5 1.06l-.375 3.648a.875.875 0 0 0 .875.954h.078l3.65-.333c.399-.04.773-.216 1.058-.499l7.875-7.875a1.68 1.68 0 0 0-.061-2.371Zm-2.975 2.923L8.159 3.449 9.865 1.7l2.389 2.39-1.75 1.706Z",fill:"current"})))}var Z=l.forwardRef(R),F=(n.p,n(4983)),V=n(3885),B=n(184),M=function(e){var t,n=e.type,r=e.replyTo,i=(0,l.useRef)(),o=(0,a.v9)((function(e){return e.auth.userInfo})),s=(0,a.I0)();return(0,B.jsxs)("article",{className:"add-comment",children:[(0,B.jsx)("img",{className:"add-comment__image",src:"./images/avatars/".concat(null===(t=o.image)||void 0===t?void 0:t.png),alt:"My Profile"}),(0,B.jsx)("textarea",{rows:"4",cols:"50",className:"body add-comment__text",placeholder:"Add a comment ...",ref:i}),(0,B.jsx)("button",{className:"btn btn--fill-blue",onClick:function(){0!==i.current.value.length?("send"===n&&s((0,F.Ir)(i.current.value)),"reply"===n&&s((0,F.Hi)(r,i.current.value)),i.current.value=""):s(V.A.addNotif({title:"Comment can not be empty",id:(0,c.Z)()}))},children:n})]})},T=n(4164),L=function(e){var t=e.onBackdropClicked;return(0,B.jsx)("div",{className:"backdrop",onClick:t})},D=function(e){var t=e.children,n=e.onBackdropClicked;return(0,B.jsxs)(l.Fragment,{children:[(0,T.createPortal)((0,B.jsx)(L,{onBackdropClicked:n}),document.getElementById("backdrop-root")),(0,T.createPortal)((0,B.jsx)("div",{className:"overlay",children:t}),document.getElementById("overlay-root"))]})},U=function(e){var t=e.onCancel,n=e.onConfirm;return(0,B.jsxs)("div",{className:"error-modal",children:[(0,B.jsx)("h1",{className:"heading-l error-modal__title",children:"Delete comment"}),(0,B.jsx)("p",{className:"body error-modal__text",children:"Are you sure you want to delete this comment? This will remove the comment and can\u2019t be undone."}),(0,B.jsxs)("div",{className:"error-modal__btns body-m",children:[(0,B.jsx)("button",{className:"btn error-modal__btn error-modal__btn--no",onClick:t,children:"no, cancel"}),(0,B.jsx)("button",{className:"btn error-modal__btn error-modal__btn--yes",onClick:n,children:"yes, delete"})]})]})},Y=function e(t){var n,r,i=t.comment,o=(t.replyTo,(0,l.useRef)()),s=(0,a.v9)((function(e){return e.ui.commentState})),u=s.operation,d=s.id,f=(0,a.I0)(),p=(0,a.v9)((function(e){return e.auth.userInfo})),h=function(e){f(V.A.setCommentState({operation:e,id:i.id}))};return(0,B.jsxs)("article",{className:"comment",children:["delete"===u&&d===i.id&&(0,B.jsx)(D,{onBackdropClicked:function(){return f(V.A.setCommentState({operation:null,id:null}))},children:(0,B.jsx)(U,{onCancel:function(){return f(V.A.setCommentState({operation:null,id:null}))},onConfirm:function(){f((0,F.YF)(i.id))}})}),(0,B.jsxs)("div",{className:"comment__container",children:[(0,B.jsxs)("div",{className:"comment__vote",children:[(0,B.jsx)(w,{onClick:function(){f((0,F.uA)(i.id,{score:i.score+1}))}}),(0,B.jsx)("p",{className:"heading-m",children:i.score}),(0,B.jsx)(y,{onClick:function(){f((0,F.uA)(i.id,{score:i.score-1}))}})]}),(0,B.jsxs)("div",{className:"comment__header",children:[(0,B.jsx)("img",{src:"./images/avatars/".concat(null===(n=i.user.image)||void 0===n?void 0:n.png),alt:"User Avatar",className:"comment__image"}),(0,B.jsxs)("h2",{className:"heading-m comment__username",children:[i.user.username,p.username===i.user.username&&(0,B.jsx)("span",{className:"comment__you",children:"you"})]}),(0,B.jsx)("p",{className:"body comment__date",children:i.createdAt})]}),(0,B.jsxs)("div",{className:"comment__btns",children:[p.username!==i.user.username&&(0,B.jsxs)("button",{className:"btn btn--blue",onClick:function(){return h("reply")},children:[(0,B.jsx)(m,{}),"Reply"]}),p.username===i.user.username&&(0,B.jsxs)(l.Fragment,{children:[(0,B.jsxs)("button",{className:"btn btn--red",onClick:function(){return h("delete")},children:[(0,B.jsx)(P,{}),"Delete"]}),(0,B.jsxs)("button",{className:"btn btn--blue",onClick:function(){return h("edit")},children:[(0,B.jsx)(Z,{}),"Edit"]})]})]}),"edit"===u&&d===i.id&&(0,B.jsxs)(l.Fragment,{children:[(0,B.jsx)("textarea",{className:"body comment__textarea",defaultValue:i.content,ref:o}),(0,B.jsx)("div",{className:"comment__update-btn",children:(0,B.jsx)("button",{className:"btn btn--fill-blue",onClick:function(){0!==o.current.value.trim().length?f((0,F.uA)(i.id,{content:o.current.value})):f(V.A.addNotif({title:"Reply can't be empty",id:(0,c.Z)()}))},children:"update"})})]}),"edit"===u&&d!==i.id&&(0,B.jsx)("p",{className:"body comment__text",children:i.content}),"edit"!==u&&(0,B.jsx)("p",{className:"body comment__text",children:i.content})]}),"reply"===u&&d===i.id&&(0,B.jsx)(M,{type:"reply",replyTo:i.id}),(null===(r=i.replies)||void 0===r?void 0:r.length)>0&&(0,B.jsxs)(l.Fragment,{children:[(0,B.jsx)("br",{}),(0,B.jsxs)("div",{className:"comment__container",children:[(0,B.jsx)("div",{className:"comment__vertical-line"}),(0,B.jsx)("div",{children:i.replies.map((function(t){return(0,B.jsx)(e,{comment:t,replyTo:i.id},t.id)}))})]})]})]})},q=function(){var e=(0,a.I0)(),t=(0,a.v9)((function(e){return e.comment}));return(0,l.useEffect)((function(){e((0,F.h_)())}),[e]),(0,B.jsxs)("main",{className:"home",children:[t.items.map((function(e){return(0,B.jsx)(Y,{comment:e},e.id)})),(0,B.jsx)(M,{type:"send"})]})}}}]);
//# sourceMappingURL=819.37f0cdd0.chunk.js.map